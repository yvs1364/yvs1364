{"ast":null,"code":"import _objectSpread from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yvs/code/yvs1364/react/recette-(copy)-for-build/src/hoc/withFirebase.js\";\nimport React, { PureComponent } from 'react';\nimport base from \"../base\";\nimport recettes from \"../recettes\";\n\nvar withFirebase = function withFirebase(WrappedComponenet) {\n  return (\n    /*#__PURE__*/\n    function (_PureComponent) {\n      _inherits(HOC, _PureComponent);\n\n      function HOC() {\n        var _getPrototypeOf2;\n\n        var _this;\n\n        _classCallCheck(this, HOC);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HOC)).call.apply(_getPrototypeOf2, [this].concat(args)));\n        _this.state = {\n          pseudo: _this.props.match.params.pseudo,\n          recettes: {}\n        };\n\n        _this.chargerExemple = function () {\n          return _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.addRecette = function (recette) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[\"recette-\".concat(Date.now())] = recette;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.updateRecette = function (key, newRecette) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[key] = newRecette;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.deleteRecette = function (key) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[key] = null;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        return _this;\n      }\n\n      _createClass(HOC, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.ref = base.syncState(\"/\".concat(this.state.pseudo, \"/recettes\"), {\n            context: this,\n            state: \"recettes\"\n          });\n        }\n      }, {\n        key: \"componentWillUmount\",\n        value: function componentWillUmount() {\n          base.removeBinding(this.ref);\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(WrappedComponenet, Object.assign({\n            recettes: this.state.recettes,\n            chargerExemple: this.chargerExemple,\n            addRecette: this.addRecette,\n            updateRecette: this.updateRecette,\n            deleteRecette: this.deleteRecette\n          }, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return HOC;\n    }(PureComponent)\n  );\n};\n\nexport default withFirebase;","map":{"version":3,"sources":["/home/yvs/code/yvs1364/react/recette-(copy)-for-build/src/hoc/withFirebase.js"],"names":["React","PureComponent","base","recettes","withFirebase","WrappedComponenet","state","pseudo","props","match","params","chargerExemple","setState","addRecette","recette","Date","now","updateRecette","key","newRecette","deleteRecette","ref","syncState","context","removeBinding"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,QAAP,MAAqB,aAArB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,iBAAiB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,cAElCC,KAFkC,GAE1B;AACNC,UAAAA,MAAM,EAAE,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAD1B;AAENJ,UAAAA,QAAQ,EAAE;AAFJ,SAF0B;;AAAA,cAMpCQ,cANoC,GAMnB;AAAA,iBAAM,MAAKC,QAAL,CAAc;AAAET,YAAAA,QAAQ,EAARA;AAAF,WAAd,CAAN;AAAA,SANmB;;AAAA,cAkBpCU,UAlBoC,GAkBxB,UAAAC,OAAO,EAAI;AACrB,cAAMX,QAAQ,qBAAO,MAAKG,KAAL,CAAWH,QAAlB,CAAd;;AACAA,UAAAA,QAAQ,mBAAYY,IAAI,CAACC,GAAL,EAAZ,EAAR,GAAoCF,OAApC;;AACA,gBAAKF,QAAL,CAAc;AAACT,YAAAA,QAAQ,EAARA;AAAD,WAAd;AACD,SAtBmC;;AAAA,cAwBpCc,aAxBoC,GAwBrB,UAACC,GAAD,EAAMC,UAAN,EAAqB;AAClC,cAAMhB,QAAQ,qBAAO,MAAKG,KAAL,CAAWH,QAAlB,CAAd;;AACAA,UAAAA,QAAQ,CAACe,GAAD,CAAR,GAAgBC,UAAhB;;AACA,gBAAKP,QAAL,CAAc;AAACT,YAAAA,QAAQ,EAARA;AAAD,WAAd;AACD,SA5BmC;;AAAA,cA6BpCiB,aA7BoC,GA6BpB,UAAAF,GAAG,EAAI;AACnB,cAAMf,QAAQ,qBAAO,MAAKG,KAAL,CAAWH,QAAlB,CAAd;;AACAA,UAAAA,QAAQ,CAACe,GAAD,CAAR,GAAgB,IAAhB;;AACA,gBAAKN,QAAL,CAAc;AAACT,YAAAA,QAAQ,EAARA;AAAD,WAAd;AACH,SAjCmC;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAQb;AACrB,eAAKkB,GAAL,GAAWnB,IAAI,CAACoB,SAAL,YAAmB,KAAKhB,KAAL,CAAWC,MAA9B,gBAAiD;AACxDgB,YAAAA,OAAO,EAAE,IAD+C;AAExDjB,YAAAA,KAAK,EAAE;AAFiD,WAAjD,CAAX;AAIC;AAbiC;AAAA;AAAA,8CAcd;AACpBJ,UAAAA,IAAI,CAACsB,aAAL,CAAmB,KAAKH,GAAxB;AACD;AAhBmC;AAAA;AAAA,iCAkCzB;AACP,iBACE,oBAAC,iBAAD;AACA,YAAA,QAAQ,EAAE,KAAKf,KAAL,CAAWH,QADrB;AAEA,YAAA,cAAc,EAAE,KAAKQ,cAFrB;AAGA,YAAA,UAAU,EAAE,KAAKE,UAHjB;AAIA,YAAA,aAAa,EAAE,KAAKI,aAJpB;AAKA,YAAA,aAAa,EAAE,KAAKG;AALpB,aAMI,KAAKZ,KANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF;AASD;AA5CiC;;AAAA;AAAA,MAClBP,aADkB;AAAA;AAAA,CAAtC;;AAgDA,eAAeG,YAAf","sourcesContent":["import React, { PureComponent } from 'react';\nimport base from \"../base\";\nimport recettes from \"../recettes\"\n\nconst withFirebase = WrappedComponenet => (\n  class HOC extends PureComponent {\n    state = {\n      pseudo: this.props.match.params.pseudo,\n      recettes: {}\n    }\n  chargerExemple = () => this.setState({ recettes })\n\n    componentDidMount () {\n    this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n        context: this,\n        state: \"recettes\"\n      });\n    }\n  componentWillUmount (){\n    base.removeBinding(this.ref)\n  }\n\n  addRecette= recette => {\n    const recettes = {...this.state.recettes}\n    recettes[`recette-${Date.now()}`] = recette\n    this.setState({recettes})\n  }\n\n  updateRecette= (key, newRecette) => {\n    const recettes = {...this.state.recettes}\n    recettes[key] = newRecette\n    this.setState({recettes})\n  }\n  deleteRecette = key => {\n      const recettes = {...this.state.recettes}\n      recettes[key] = null\n      this.setState({recettes})\n  }\n    render() {\n      return (\n        <WrappedComponenet\n        recettes={this.state.recettes}\n        chargerExemple={this.chargerExemple}\n        addRecette={this.addRecette}\n        updateRecette={this.updateRecette}\n        deleteRecette={this.deleteRecette}\n        {...this.props} />\n      );\n    }\n  }\n)\n\nexport default withFirebase;\n"]},"metadata":{},"sourceType":"module"}